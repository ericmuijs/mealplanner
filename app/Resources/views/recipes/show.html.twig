<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">&times;</button>
<h4 class="modal-title">{{ recept.titel }}</h4>{{ recept.rating|rating }}
</div>
<div class="modal-body">
		<div class="row">
			<div class="col-sm-8 showrecipe-image">
				{% if recept.fotonaam %}
				<img src="{{ vich_uploader_asset(recept, 'fotoBestand') | imagine_filter('thumb_lg') }}" alt="{{ recept.titel }}" />
				{% else %}
				<img src="{{ asset('images/recepten/default-recipe-big.png') }}" alt="default image" style="max-height: 250px;">
				{% endif %}
				{% if recept.bron %}
				<p class="small" style="margin-top:20px">Bron:
					{% if recept.bron matches '/^http[s]?/' %}
						{% set host = recept.bron|split('/')[2]|trim('www.','left') %}
						<a href="{{ recept.bron }}" target="_blank"><span class="label label-warning">{{ host }}</span></a>
					{% elseif recept.bron matches '/^www/' or recept.bron matches '/^\\w+\\.\\w{2,3}\\/{1}\\w+/' %}
						{% set host = recept.bron|split('/')[0]|trim('www.','left') %}
						<a href="http://{{ recept.bron }}" target="_blank"><span class="label label-warning">{{ host }}</span></a>
					{# Note: Twig auto-escapes the \ character so you have to double escape it! #}				
					{% else %}
						<span>{{ recept.bron }}</span>
					{% endif %}
				</p>
				{% endif %}
			</div>
			<div class="col-sm-4">
				<h5 style="margin-top:0;">Ingrediënten</h5>
				<p class="small">Aantal personen: <input type="number" value="4" min="1" max="20" id="personen"></p>
<!-- 				<ul class="small" style="padding:0 0 0 15px;">
				{% for ingredient in recept.ingredienten %}
				<li>
					<span class="hoeveelheid" data-quantity="{{ (ingredient.hoeveelheid / recept.personen) }}">{% if ingredient.hoeveelheid %} {{ (ingredient.hoeveelheid / recept.personen * 4)|number_format(1,',','.')|trim('0','right')|trim(',','right') }} {% endif %}</span>
					<span class="eenheid">{{ ingredient.eenheid }}</span>
					<span class="ingredient">{{ ingredient.ingredient }}</span>
				</li>
				{% endfor %}
				</ul> -->
				<table style="font-size:12px;">
					<thead>
						<tr>
							<td></td>
							<td></td>
						</tr>
					</thead>
					<tbody>
						{% for ingredient in recept.ingredienten %}
						<tr>
						<td class="list-unit">
							<span class="hoeveelheid" data-quantity="{{ (ingredient.hoeveelheid / recept.personen) }}">{% if ingredient.hoeveelheid %} {{ (ingredient.hoeveelheid / recept.personen * 4)|number_format(1,',','.')|trim('0','right')|trim(',','right') }} {% endif %}</span>
							<span class="eenheid">{{ ingredient.eenheid }}</span>
						</td>
						<td class="list-ingredient">
							<span class="ingredient">{{ ingredient.ingredient }}</span>
						</td>
						</tr>
				{% endfor %}
					</tbody>
				</table>


<!-- 				<p class="small"><a data-toggle="modal" data-target="#myModal" href="{{ path('editform', {'id':recept.id}) }}" id="editrecipe_modal"><span class="glyphicon glyphicon-pencil"></span> Bewerk recept</a></p>
				<p class="small"><a data-toggle="modal" data-target="#myModal" href="{{ path('deleterecept', {'id':recept.id}) }}" id="deleterecipe_modal"><span class="glyphicon glyphicon-trash"></span> Verwijder recept</a></p>
				<p>{{ recept.rating|rating }}</p> -->
			</div>
		</div><hr>

		<div class="row">
			<div class="col-sm-12">
				<h5>Bereiding</h5>
				<p>{{ recept.bereidingswijze|raw }}</p>
			</div>
		</div><hr>

		<div class="row">
			<div class="col-sm-4">
				<h5>Type gerecht</h5>
					{% if recept.gerecht %}
						<p>{{ recept.gerecht.name }}</p>
					{% endif %}
			</div>
			<div class="col-sm-4">
				<h5>Keuken</h5>
				{% if recept.keuken %}
					<p>{{ recept.keuken.name }}</p>
				{% endif %}
			</div>
			<div class="col-sm-4">
				<h5>Hoofdingrediënt</h5>
				{% if recept.hoofdingredient %}
					<p>{{ recept.hoofdingredient.name }}</p>
				{% endif %}
			</div>
		</div>

		<div class="row">
			<div class="col-sm-4">
				<h5>Bereidingstijd</h5>
				{% if recept.bereidingstijd %}
				<p>{{ recept.bereidingstijd | date("G \\u i \\m\\i\\n")}}</p>
				{% endif %}
			</div>
			<div class="col-sm-4">	
				<h5>Kostprijs</h5>
				{% if recept.kostprijs %}
				<p>{{ recept.kostprijs }} p.p.</p>
				{% endif %}
			</div>
			<div class="col-sm-4">
				<h5>Tags</h5>	
				{% if recept.tags %}
					{% for tag in recept.tags %}
					<span class="label label-primary">{{ tag.name }}</span>
					{% endfor %}
				{% endif %}
			</div>
		</div>
</div>

<!-- <div class="modal-footer">
	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div> -->

<script>
$(document).ready(function(){
	
	$('#personen').on('change',function(){
		var q = $(this).val();
		$('.modal-body span.hoeveelheid').each(function(){
			if ($(this).text() !== ''){
				singleVal = $(this).data("quantity");
				newVal = singleVal * q;
				newVal = newVal.toLocaleString('nl-BE', {maximumFractionDigits:1});
				$(this).html(newVal);
			}
		}); 
	});


});
</script>